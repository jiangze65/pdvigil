<!-- templates/map.html -->
{% extends "base.html" %}
{% block content %}
  <div class='limiter'>
    <div class='col10 margin1 pad4y'>
      <div class='space-bottom'>
        <div id='map' class='col12 row10'></div>
      </div>
    </div>
  </div>
<script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
 integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
 crossorigin=""></script>
<link href='static/leaflet.fullscreen.css' rel='stylesheet' />
<script src='static/Leaflet.fullscreen.min.js'></script>
<script>
  var map = L.map('map', {
    fullscreenControl: {
        pseudoFullscreen: false
    }
  }).setView([1.350270,103.801959], 12);

	var substationIcon = L.icon({
		iconUrl: 'static/substation.png',
	});

	var headquarterIcon = L.icon({
		iconUrl: 'static/headquarter.png',
	});
	// Define an icon called cssIcon
	var cssIcon = L.divIcon({
	// Specify a class name we can refer to in CSS.
	className: 'css-icon',
	html: '<div class="gps_ring"></div>'
	// Set marker width and height
	,iconSize: [22,22]
	// ,iconAnchor: [11,11]
	});

    var marker1 = L.marker([1.350507,103.966971], {icon: substationIcon}).addTo(map);
    marker1.bindPopup("<b>Substation1</b><br>Monitored by PGVigil.");
    var marker2 = L.marker([1.366982,103.832368], {icon: substationIcon}).addTo(map);
    marker2.bindPopup("<b>Substation2</b><br>Monitored by PGVigil.");
	L.marker([1.366982,103.832368], {icon: cssIcon}).addTo(map);
    var marker3 = L.marker([1.339523,103.690708], {icon: substationIcon}).addTo(map);
    marker3.bindPopup("<b>Substation3</b><br>Monitored by PGVigil.");
    var marker4 = L.marker([1.279114, 103.818521], {icon: headquarterIcon}).addTo(map);
    marker4.bindPopup("<b>Headquarter</b><br>Monitored by PGVigil.");
	
	var point1 = new L.LatLng(1.350507,103.966971);
	var point2 = new L.LatLng(1.366982,103.832368);
	var point3 = new L.LatLng(1.339523,103.690708);
	var point4 = new L.LatLng(1.279114, 103.8185211);
	var pointList = [point1, point4,point2,point4,point3];

	var firstpolyline = new L.Polyline(pointList, {
		color: 'red',
		weight: 3,
		opacity: 0.5,
		dashArray: '5, 10'
	});
	firstpolyline.addTo(map);

    var positron = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
    }).addTo(map);
</script>
{% endblock %}
